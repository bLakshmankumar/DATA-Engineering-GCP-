MySQL Migration: VM ‚Üí Cloud SQL (Export & Import) :
===================================================
Big Picture (Simple Theory)
Imagine we already have:
------------------------
  A VM
    MySQL installed on the VM
  Data inside MySQL:
    Databases
    Tables
    Views
    Functions / Procedures
  Goal:
   üëâ Move all MySQL data from VM to Cloud SQL

Methods for migration :
========================
  > Manual (Export & Import)
  > DMS (Database Migration Service)
 Right now we focus on Manual method.

# What is Manual Migration (Export & Import)?
=============================================
  Manual migration means:
    Export data from source MySQL
    Store it as a dump file
    Upload dump to GCS
    Import dump into Cloud SQL

 When should we use Manual Method?
 ---------------------------------
   ‚úî Small / medium databases
   ‚úî One-time migration 
   ‚úî Minimal downtime acceptable
   ‚úî Simple MySQL versions
   ‚ùå Not good for:
       Large databases
       Near-zero downtime requirements
Real-time Flow :
----------------
  MySQL on VM 
   ‚îÄ‚îÄ(mysqldump)‚îÄ‚îÄ‚ñ∂ Dump file (.sql) 
   ‚îÄ‚îÄ(upload)‚îÄ‚îÄ‚ñ∂ Google Cloud Storage (GCS) 
   ‚îÄ‚îÄ(Cloud SQL import)‚îÄ‚îÄ‚ñ∂ Cloud SQL (MySQL)
Simple explanation : 
--------------------
  mysqldump exports data from VM MySQL
  Dump file is uploaded to GCS
  Cloud SQL import pulls data from GCS into Cloud SQL

# Lets Step-by-Step Manual Migration (REALTIME) :
=================================================
  STEP 0Ô∏è‚É£ Prerequisites :
  -----------------------
    ‚úî VM has MySQL running
    ‚úî Cloud SQL MySQL instance created
    ‚úî GCS bucket created
    ‚úî Network connectivity
    ‚úî Permissions:
        VM ‚Üí GCS access
        Cloud SQL ‚Üí GCS access
   STEP 1Ô∏è‚É£ Export data from MySQL on VM :
   ---------------------------------------
     Login to VM :
     -------------
        ssh user@vm-ip
     Export single database (example) :
     ----------------------------------
      mysqldump -u root -p \
      --routines --triggers --events \
      orders_db > orders_db.sql

     Export ALL databases (Recommended) :
     ------------------------------------
       mysqldump -u root -p \
       --routines \
       --triggers \
       --events \
       --databases db1 db2 > full_dump.sql
      What this includes: 
      --------------------
        Option	              Includes
      --routines	   Stored functions & procedures
      --triggers	            Triggers
        --events	             Events
      --databases	        DB structure + data
     üëâ This covers tables, views, functions

   STEP 2Ô∏è‚É£ Verify dump file :
   ---------------------------
     ls -lh orders_db.sql
    üëâ Make sure file is created and non-zero size

   STEP 3Ô∏è‚É£ Upload dump to GCS :
   -----------------------------
     Create GCS bucket (if not exists) 
        gsutil mb gs://mysql-migration-bucket
     Upload dump file 
        gsutil cp orders_db.sql gs://mysql-migration-bucket/

   STEP 4Ô∏è‚É£ Prepare Cloud SQL :
   ---------------------------
    ‚úî Cloud SQL MySQL instance running
    ‚úî Database exists (or let import create it)
    ‚úî Enough storage
    ‚úî Same or higher MySQL version

   STEP 5Ô∏è‚É£ Import dump into Cloud SQL :
   ------------------------------------
     Run from Cloud Shell or local machine: 
       gcloud sql import sql orders-db-prod \
       gs://mysql-migration-bucket/orders_db.sql \
       --database=orders_db
     > What happens internally:
     --------------------------
         Cloud SQL pulls file from GCS
         Executes SQL statements
         Creates:
           Tables
           Views
           Functions
           Data

     STEP 6Ô∏è‚É£ Monitor import status :
     --------------------------------
       gcloud sql operations list --instance=orders-db-prod Or check in "GCP Console ‚Üí Cloud SQL ‚Üí Operations"

     STEP 7Ô∏è‚É£ Validate migration :
     -----------------------------
       Connect to Cloud SQL:
         gcloud sql connect orders-db-prod --user=root
       Run :
         SHOW DATABASES;
         USE orders_db;
         SHOW TABLES;
         SELECT COUNT(*) FROM orders;
         SHOW FUNCTION STATUS;
         SHOW FULL TABLES WHERE Table_type = 'VIEW';
       ‚úî Data verified
       ‚úî Migration complete 
   
  Note : Downtime in Manual Migration (Important)
  -----------------------------------------------
   No new data should be written to the source database while you are taking the dump.
    ‚ùå During export:
         Writes should be stopped
         Otherwise data mismatch
    üëâ Usually:
         Stop app
         Take dump
         Import
         Start app


  
     
   


No automation, no replication ‚Äî one-time movement.
